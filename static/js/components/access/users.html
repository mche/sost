@@@ access/users/list

<div ng-hide="$ctrl.ready" ng-include=" 'progress/load' "></div>

<div ng-if="$ctrl.ready">

<div class="">
  <div class="input-field">
    <a ng-show="$ctrl.showBtnNewUser" ng-click="$ctrl.New()" href="javascript:" class="orange-text" title="Добавить сотрудника" style="position:absolute; right:0.5rem; top:0.2rem;">
      <i class="material-icons">person_add</i>
    </a>
    <input ng-init="$ctrl.InitSearch()" ng-focus000="$ctrl.InitSearch($event)" type="text" name="search" placeholder="поиск ФИО (логин)" class="" style="margin:0;">
  </div>
</div>

<ul class="tabs card000 tabs-transparent teal lighten-2" style="margin:0;">
  <li ng-repeat="t in ['Текущие', 'Уволенные']" class="tab" ng-attr-id000="">
    <a ng-click="$ctrl.SelectTab($index)" href="javascript:" ng-class="{'active': $index === $ctrl.tab, 'red-text text-lighten-4': $index ===1}" class="" style000="font-size:1.5rem;" title="{{t}}">
      <i ng-show="$index ===0 "  class="material-icons">person</i>
      <i ng-show="$index ===1 "  class="material-icons">person_outline</i>
      <span>{{$ctrl.data.filter($ctrl.FilterData, $index).length}}</span>
    </a>
  </li>
  <!--li class="tab" ng-show="$ctrl.New(true)">
    <a ng-click="$ctrl.New()" href="javascript:" class="btn000" title="Добавить сотрудника">
      <i class="material-icons">person_add</i>
    </a>
  </li-->
  <li class="tab">
    <a ng-click="$ctrl.ShowUpload()" href="javascript:" title="Загрузить сотрудников табулированно">
      <i class="material-icons">file_upload</i>
    </a>
  </li>
  <li class="tab">
    <a ng-click="$ctrl.Download()" href="javascript:" title="Выгрузить список">
      <i class="material-icons">file_download</i>
    </a>
  </li>
  <li class="tab" ng-show000="$ctrl.param.users && $ctrl.param.users.length">
    <a ng-click="$ctrl.FilterChecked()" href="javascript:" title="показать {{$ctrl.filterChecked ? 'все' : 'только отмеченные'}}">
      <i ng-show="$ctrl.filterChecked" class="material-icons">select_all</i>
      <i ng-hide="$ctrl.filterChecked" class="material-icons">check_box</i>
    </a>
  </li>
  <!-- li class="tab">
    <a ng-click="$ctrl.Refresh()" href="javascript:" title="Обновить">
      <i class="material-icons">refresh</i>
    </a>
  </li-->
</ul>

<div ng-show="$ctrl.refresh" ng-include=" 'progress/load' "></div>

<div ng-hide="$ctrl.upload === undefined" class="card indigo lighten-5">
  <div class="card-title">
    <h3 class="indigo-text text-darken-2">Загрузить табулированный список сотрудников </h3>
  </div>
  
  <div class="card-content input-field">
    <div><span class="chip white">Фамилия</span> tab <span class="chip white">Имя</span> tab <span class="chip white">Отчество</span> tab <span class="chip white">Должность</span></div>
    <textarea ng-model="$ctrl.upload" class="materialize-textarea" style="font-size: 0.8rem;"></textarea>
    <a ng-click="$ctrl.Upload()" href="javascript:" class="btn-floating indigo-text text-darken-2" ng-disabled="!$ctrl.upload || !$ctrl.upload.length">
      <i class="material-icons">file_upload</i>
    </a>
  </div>
  <div ng-show="$ctrl.upload && $ctrl.cancelerHttp" ng-include=" 'progress/save' "></div>
</div>

<div ng-hide="$ctrl.download === undefined" class="card indigo lighten-5">
  <div class="card-title">
    <h3 class="indigo-text text-darken-2">Выгрузка пользователей</h3>
  </div>
  <div class="card-content input-field">
    <textarea ng-model="$ctrl.download" class="materialize-textarea" style="font-size: 0.8rem;"></textarea>
  </div>
  <div ng-show="$ctrl.download && $ctrl.cancelerHttp" ng-include=" 'progress/load' "></div>
</div>


<h3 ng-show="!$ctrl.filterChecked && $ctrl.tab === 0">Текущий список</h3>
<h3 ng-show="!$ctrl.filterChecked && $ctrl.tab === 1">Уволенные сотрудники</h3>
<h3 ng-show="$ctrl.filterChecked">Отмеченные сотрудники ({{ $ctrl.FilterCheckedCount() }})</h3>

<ul ng-if="$ctrl.tabsReady" class="collection users" style="overflow-y: auto;">
  <li ng-repeat="user in $ctrl.data | filter: $ctrl.FilterData" class="collection-item" ng-class="{'selected': user._selected, 'edit': user._edit, 'checked': user._checked}" ng-attr-id="{{ 'user-' + user.id}}" title000="{{user|json}}">
    
    <a ng-show="user.id" ng-click="$ctrl.ToggleSelect(user)" href="javascript:" class="right">
      <!--i class="material-icons">visibility</i-->
      <i ng-hide="user._selected" class="material-icons circle yellow lighten-4">radio_button_unchecked</i>
      <i ng-show="user._selected" class="material-icons circle yellow lighten-4">radio_button_checked</i>
    </a>
    
    <a ng-show="user.id && ($ctrl.param.role || $ctrl.param.route)" ng-click="$ctrl.SaveCheck(user)" href="javascript:" class="right" ng-class="{'grey-text': $ctrl.param.route}" >
      <i ng-hide="user._checked" class="material-icons">check_box_outline_blank</i>
      <i ng-show="user._checked" class="material-icons">check_box</i>
    
    </a>
    
    <a ng-hide000="user._edit" ng-click="$ctrl.Edit(user)" href="javascript:">
      <ul class="inline">
        <li ng-repeat="n in user.names track by $index" class="inline" style="padding: 0 0.1rem;"><h5>{{n}}</h5></li>
        <li class="inline grey-text fs8">#{{ user.id }}</li>
      </ul>
    </a>
    
    <div ng-show="user._edit && $ctrl.cancelerHttp" ng-include=" 'progress/save' "></div>
    
    <div ng-if="user._edit && !$ctrl.cancelerHttp" class="card edit teal lighten-5">
    
    <div class="card-title">
    
      <a  class="btn-flat right orange-text" href="javascript:" ng-click="$ctrl.CloseEdit(user, $index)">
        <i class="material-icons">cancel</i>
        <!--span>Отмена</span-->
      </a>
        
      <h3 ng-hide="user.id" class="orange-text">Новый сотрудник</h3>
      <h3 ng-show="user.id" class="">Редактировать сотрудника</h3>
    </div>
    <div class="card-content">

      <div ng-repeat="n in ['Фамилия', 'Имя', 'Отчество']">
        <h5>{{n}}</h5>
        <div class="input-field">
          <input type="text" ng-model="user._edit.names[$index]" placeholder="{{n}}" class="">
        </div>
      </div>
      <div class="row">
        <div class="input-field col s6">
          <h5 class="right-align">Логин</h5>
          <input type="text" ng-model="user._edit.login" placeholder="" class="right-align">
        </div>
        
        <div class="input-field col s6">
          <h5>Пароль</h5>
          <a ng-click="$ctrl.ShowPass(user)" href="javascript:" style="position:absolute; right:0;"><i class="material-icons">visibility{{ user._edit._showPass ? '_off' : ''}}</i></a>
          
          <input type="{{user._edit._showPass ? 'text' : 'password'}}" ng-model="user._edit.pass" placeholder="" class="">
          
        </div>
        
        <div class="center">
          <a class="btn-flat red-text" href="javascript:" ng-click="$ctrl.DeleteLogin(user)" ng-show="user._edit.login" ng-disabled000="!$ctrl.SaveActive(user)">
            <i class="material-icons">cancel</i>
            <span>Убрать логин</span>
          </a>
        </div>
        
      </div>
      
      <div ng-show="$ctrl.error"><span class="chip red-text">{{$ctrl.error}}</span></div>
      
      <a class="btn" href="javascript:" ng-click="$ctrl.Save(user, true)" ng-disabled="!$ctrl.SaveActive(user)">
        <i class="material-icons">save</i>
        <span>Сохранить</span>
      </a>
      <a ng-if="user.id && !user.disable" class="btn red lighten-2" ng-click="$ctrl.Disable(user)" href="javascript:" data-target="delete-confirm" >
        <i class="material-icons">person_outline</i>
        <span>Уволить</span>
      </a>
      <a ng-if="user.id && user.disable" class="btn blue lighten-1" ng-click="$ctrl.Disable(user)" href="javascript:" data-target="delete-confirm" >
        <i class="material-icons">undo</i>
        <span>Вернуть в работу</span>
      </a>
      <a  class="btn orange lighten-2" href="javascript:" ng-click="$ctrl.CloseEdit(user, $index)">
        <i class="material-icons">cancel</i>
        <span>Отмена</span>
      </a>
    </div></div>
  
  </li>

</ul>

<!-- Modal Structure -->
<!--div id="delete-confirm" class="card modal">
  <div class="modal-content">
    <h4 class="red-text">Удаление сотрудника</h4>
    <p>Уверены?</p>
  </div>
  <div class="modal-footer">
    <a href="javascript:" class="modal-action modal-close  btn-flat">Отмена</a>
    <a ng-click="$ctrl.DeleteBtn()" href="javascript:" class="modal-action modal-close  btn-flat teal-text">Да</a>
    
  </div>
</div-->

</div>
