
@@@ transport/ask/table

<div ng-hide="$ctrl.ready" ng-include=" 'progress/load' "></div>

<!--div>{{ $ctrl.param | json }}</div-->
<ul ng-if="$ctrl.ready" class="tabs card000 tabs-transparent teal lighten-2" style="margin:0;">
  <li ng-repeat="t in $ctrl.tabs" class="tab" ng-attr-id000="">
    <h3><a ng-click="$ctrl.SelectProject(t)" href="javascript:" ng-class="{'active': t === $ctrl.tab}" class="" style="font-size:inherit;">{{t.title}}</a></h3>
  </li>
  <!--li class="tab000 blue000" ng-if="$ctrl.param['создавать проект']" style="position:absolute; right:0; top:0;">
    <a ng-click="$ctrl.NewProject()" href="javascript:" class="btn blue white-text" style=""><i class="material-icons">note_add</i><span>Новый проект</span></a>
  </li-->
</ul>
<!--div class="table-scroll-outer"><div class="table-scroll-inner"-->
<table ng-if="$ctrl.ready" class="striped highlight">
  <thead>
    <!--tr><th>#</th-->
    <th class="right-align000">
      <h5>
        <span>Даты</span>
        <div><a href="javascript:" data-target="date1-select">
          <!--i class="material-icons">today</i-->
          <span>начала</span>
        </a></div>
        <!--span>/</span-->
        <div><a href="javascript:" data-target="date2-select">
          <!--i class="material-icons">today</i-->
          <span>заверш.</span>
        </a></div>
      </h5>
      <div ng-if="$ctrl.param.table['дата1'].ready">
       <span ng-repeat="v in $ctrl.param.table['дата1']['формат'] track by $index" class="breadcrumb00 chip green-text">{{v}}</span>
      </div>
      <div ng-if="$ctrl.param.table['дата2'].ready">
       <span ng-repeat="v in $ctrl.param.table['дата2']['формат'] track by $index" class="breadcrumb00 chip green-text">{{v}}</span>
      </div>
    </th>
    
    <th>
      <h5><a href="javascript:" data-target="contragent2-select" class="green-text text-darken-2">
        <i class="material-icons">file_download</i>
        <span>Заказчик</span>
      </a></h5>
      <div ng-if="$ctrl.param.table['заказчик'].ready && $ctrl.param.table['заказчик'].id">
       <span class="chip green-text">{{$ctrl.param.table['заказчик'].title}}</span>
      </div>
      <h5><a href="javascript:" data-target="object-select" class="green-text text-darken-2">
        <i class="material-icons">star</i>
        <span>Проект-объект</span>
      </a></h5>
      <div ng-if="$ctrl.param.table['объект'].ready && $ctrl.param.table['объект'].id">
       <span class="chip green-text">{{$ctrl.param.table['объект'].title}}</span>
      </div>
    </th>
    
    <!--th>
      <h5>
        <i class="material-icons">place</i>
        <span>Откуда</span>
      </h5>
    </th>
    
    <th>
      <h5>
        <i class="material-icons">place</i>
        <span>Куда</span>
      </h5>
    </th-->
    
    <th>
      <h5>
        <i class="material-icons">shopping_cart</i>
        <span>Груз</span>
      </h5>
    </th>
    
    <th>
      <h5><a href="javascript:" data-target="contragent1-select" class="green-text text-darken-2">
        <i class="material-icons">file_upload</i>
        <span>Перевозчик</span>
      </a></h5>
      <div ng-if="$ctrl.param.table['перевозчик'].ready && $ctrl.param.table['перевозчик'].id">
       <span class="chip green-text">{{$ctrl.param.table['перевозчик'].title}}</span>
      </div>
    </th>
    
    <th>
      <h5><a href="javascript:" data-target="transport-select" class="">
        <i class="material-icons">local_shipping</i>
        <span>Машина</span>
      </a></h5>
      <div ng-if="$ctrl.param.table['транспорт'].ready && $ctrl.param.table['транспорт'].id">
       <span class="chip green-text">{{$ctrl.param.table['транспорт'].title}}</span>
      </div>
    </th>
    
    <th>
      <h5>
        <i class="icon-rouble"></i>
        <span>Оплата</span>
      </h5>
    </th>
    
    <th>
      <h5>
        <i class="material-icons">message</i>
        <span>Описание</span>
      </h5>
    </th>
    
    </tr>
  </thead>
  
  <tbody>
    
    <tr ng-repeat="it in $ctrl.data | orderBy : $ctrl.OrderByData : false" ng-init="$ctrl.InitRow(it)" ng-attr-id="{{it.id}}" ng-click="$ctrl.Edit(it)" class="waves-effect00 waves-teal00" ng-class="{'selected': it === ($ctrl.param.edit || $ctrl.param.newX000)}" style="cursor:pointer;" title000="{{it | json}}">
      <!--td>
        <div ng-class="{'deep-orange-text text-darken-1': it._new}">{{$index+1}}<sup ng-show="it._new">*</sup></div>
      </td-->
      <td class="right-align00">
        <div>{{it["дата1 формат"]}}</div>
        <div>{{it["дата2 формат"]}}</div>
      </td>

      <td>
        <div ng-show="it['заказчик']">
          <i class="material-icons">file_download</i>
          <span>{{it["заказчик"]}}</span>
        </div>
        
        <div ng-show="it['проект']">
          <i class="material-icons">star</i>
          <span>{{it["проект"]}}</span></div>
        
        <div>{{it["откуда"]}}</div>
        
        <div ng-show="it['объект']">
          <span class="fs12 grey-text">→</span>
          <span>{{it['объект']}}</span>
        </div>
        
        <div ng-show="it['куда']">
          <span class="fs12 grey-text">→</span>
          <span>{{it['куда']}}</span>
        </div>
        
      </td>
      
      <td>
        <div class="truncate" style="width:5rem;" title="{{it['груз']}}">{{it['груз']}}</div>
      </td>
      
      <td>
        <div>{{it['перевозчик']}}</div>
      </td>
      
      <td>
        <div>{{it['транспорт']}}</div>
        <div><span ng-repeat="cat in it['категории'].slice(1) track by $index" class="breadcrumb teal-text">{{cat}}</span></div>
      </td>
      
      <td>
        <div ng-show="it['стоимость']" title="стоимость">
          
          <span>{{parseFloat(Util.numeric(it['стоимость'])).toLocaleString('ru-RU')}} руб</span>
          <span ng-show="it['тип стоимости']">/{{ payType[it['тип стоимости']].title }}</span>
        </div>
        <div ng-show="it['факт']">
            <span>{{it['факт']}}</span>
            <span ng-show="it['тип стоимости']">{{ payType[it['тип стоимости']].title }}</span>
        </div>
        <div ng-show="it['факт']">
          <span class="bold">Σ</span>
          <span>{{parseFloat(Util.numeric(it['сумма'])).toLocaleString('ru-RU')}} руб</span>
        </div>
      </td>

      <td>
        <!--textarea ng-model="it['коммент']" ng-disabled="true" class="materialize-textarea" style="font-size:0.8rem; padding:0;"></textarea-->
        <div class="fs8 grey-text truncate" style="width:7rem;" title="{{it['коммент']}}">{{it['коммент']}}</div>
      </td>
    </tr>
    
    <tr>
      <td colspan="10">
        <div class="center">
          <span>записей: {{ $ctrl.data.length }}</span>
          <a ng-show="$ctrl.data.length >= 100" class="btn-flat" ng-click="$ctrl.LoadData(true)" href="javascript:">
            <i class="material-icons">file_download</i>
            Показать еще 100 записей
          </a>
        </div>
        <div ng-show="$ctrl.cancelerHttp" ng-include=" 'progress/load' "></div>
      </td>
    
    </tr>
  
  </tbody>

</table>
<!--/div></div-->

<!-- Modal Structure -->
<div id="date1-select" class="card modal" ng-if="$ctrl.param.table">
  <div class="modal-content">
    <h2 class="">Ограничить записи по датам</h2>
    <date-between data-param="$ctrl.param.table['дата1']"></date-between>
  </div>
  <div>{{$ctrl.param.table['дата1'] | json}}</div>
  <div class="modal-footer">
    <a ng-click="$ctrl.Cancel('дата1')" href="javascript:" class="modal-action modal-close  btn-flat">Отмена</a>
    <a ng-click="$ctrl.Send('дата1')" href="javascript:" class="modal-action modal-close  btn-flat teal-text">Готово</a>
    
  </div>
</div>

<!-- Modal Structure -->
<!--div id="sum-select" class="card modal" ng-if="$ctrl.param.table">
  <div class="modal-content">
    <h2 class="">Ограничить записи по сумме</h2>
    <div class="input-field">
      <h4>От</h4>
      <input type="text" class="" ng-model="$ctrl.param.table['сумма'].values[0]">
    </div>
    
    <div class="input-field">
      <h4>До</h4>
      <input type="text" class="" ng-model="$ctrl.param.table['сумма'].values[1]">
    </div>
  </div>
  <div class="modal-footer">
    <a ng-click="$ctrl.Cancel('сумма')" href="javascript:" class="modal-action modal-close  btn-flat">Отмена</a>
    <a ng-click="$ctrl.Send('сумма')" href="javascript:" class="modal-action modal-close  btn-flat teal-text">Готово</a>
    
  </div>
</div-->

<!-- Modal Structure -->
<div id="contragent1-select" class="card modal" ng-if="$ctrl.param.table">
  <div class="modal-content">
    <h2 class="">Ограничить записи по перевозчику</h2>
    <contragent-item data-data="$ctrl.param.table['перевозчик']"></contragent-item>
  </div>
  <div class="modal-footer">
    <a ng-click="$ctrl.Cancel('перевозчик')" href="javascript:" class="modal-action modal-close  btn-flat">Отмена</a>
    <a ng-click="$ctrl.Send('перевозчик')" href="javascript:" class="modal-action modal-close  btn-flat teal-text">Готово</a>
    
  </div>
</div>



