@@@ tmc/snab/table

<div ng-if=" moveParam " class="modal-content-000">
  <tmc-baza-form  data-param=" moveParam " data-on-cancel=" $c.CloseModalMove(data) "></tmc-baza-form><!--- форма перемещения-->
</div>

<div ng-if="$c.ready && !$c.refreshTable" class=" z-depth-3 animated slideInUp " style="max-height: 70vh; overflow: auto;">
<table ng-init="$c.InitTable()" class="tmc-snab top bordered z-depth-3 highlight-000" ng-class=" $c.param.tableClass || ' teal lighten-4 ' " style000="margin:0;"><tbody class="">
<!---| filter: $c.FilterData -->
<tr ng-repeat="ask in $c.dataFiltered  | orderBy: $c.OrderByData : true " class="relative  " ng-attr-status="{{ ask['статус'] }}" ng-init="$c.InitAsk(ask)" ng-attr-id="{{ ask.id }}"  style="">
  <!--div class="card-content"-->
    <!--div class="row00">
      <div class="col00 s12"-->
        <!--a ng-click="$c.EditAsk(ask)" ng-href="{{ $c.EditAsk() || 1 ? 'javascript:' : '' }}" class="black-text block relative" ng-class="{'btn-flat000': $c.param['объект'].id !== 0}" ng-style="!$c.EditAsk() && {'cursor': 'auto'}" ng-disabled000="$c.param['объект'].id !== 0"-->
          <td class="relative" style="width:1%; padding:0.5rem" title="дата отгрузки {{ ask['дата1 краткий формат'] || ask['дата1'] }}">
            <a ng-click="$c.EditAsk(ask)"  ng-class="{'hover-shadow3d': $c.EditAsk()}" ng-style-000="$c.EditAsk() && {'cursor': 'pointer'}" href="javascript:" class="chip z-depth-1 white center" style="padding:0.3rem;">
              <!--svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" class="teal-fill fill-darken-3" style="height: 1.2rem;"><use xlink:href="/fonts/icons.svg#start-date" /></svg>
              <br-->
              <span class="fs8">{{ ask['$дата1']['день нед'] }}</span>
              <br>
              <span class="bold fs14">{{ ask['$дата1']['day'] }}</span>
              <br>
              <span class="fs8">{{ ask['$дата1']['мес'] }}</span>
            </a>
            
            <span class="right000" style="position: absolute; z-index: 1; bottom:0; left:0.2rem;"><span class="grey-text fs7">#{{ ask.id }}</span></span>
          </td>
          
          <td class="" style="width:25%; padding:0.5rem;">
            <div ng-repeat="k in ask['@грузоотправители']" class="chip000 block000 green000 lighten-4-000">
              <h4  class="relative center000 leaf z-depth-1 white-text " ng-class="{'blue darken-3': !!ask['$с объекта'], 'green darken-3': !ask['$с объекта'],}" style="width:100%;" title="поставщик-грузоотправитель">
                <!--svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" class="teal-fill fill-darken-3" style="height: 1.2rem;" ><use xlink:href="/fonts/icons.svg#arrow-left-up-round" /></svg-->
                <i class="icon icon-left  before-rotate180 right"></i>
                <!--span class="right chip fs10 bold lime lighten-4 lime-text text-darken-4" style="padding: 0.3rem;" ng-init=" len = [$c.param['фильтр тмц'] && ask['@позиции тмц'].filter($c.param['фильтр тмц'], ask).length, ask['@позиции тмц'].length] ">
                  <i class="icon icon-left  before-rotate180"></i>
                  <span ng-if=" len[0] && len[0] != len[1] " class="chip padd-0-05" title="позиции (фильтр)">{{ len[0] }} из</span>
                  <span class="chip padd-0-05 lime darken-4 white-text" title="всего позиций">{{ len[1] }}</span>
                  <!--span ng-init=" accepted = ask['@позиции тмц'].filter($c.FilterRowAccepted, ask).length " class="chip padd-0-05 red darken-3" title="принято позиций">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" class="white-fill" style="height: 1rem;"><use xlink:href="/fonts/icons.svg#checked1"></use></svg>
                    <span class="white-text">{{ accepted }}</span>
                  </span>
                  поз.
                </span-->
                <span class="fw500">{{k.title}}</span>
              </h4>
              
              <div ng-hide="(ask['$с объекта'] && ask['$с объекта'].id) || !(ask['$откуда'][$index] && ask['$откуда'][$index].length && ask['$откуда'][$index][0])" class="iblock000" title="адрес отгрузки">
                <svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" class=" fill-darken-3 rotate90left000" ng-class="{'blue-fill': !!ask['$с объекта'], 'green-fill': !ask['$с объекта']}" style="height: 1.2rem;"><use xlink:href="/fonts/icons.svg#from-location" /></svg>
                  <!--span ng-repeat="a1 in ask.addr1"-->
                    <span ng-repeat="aa1 in ask['$откуда'][$index] track by $index" class="chip00 green-text text-darken-3 breadcrumb middle" ng-init="A1 = $c.ObjectOrAddress(aa1, ask)" ng-class="{'blue-text text-darken-3': !!A1.id}" ng-hide000="ask['$с объекта'] && ask['$с объекта'].id && A1.id && ask['$с объекта'].id == A1.id">
                      <span class="chip z-depth-1">{{ A1.name }}</span>
                    </span>
                  <!--/span-->
                  
              </div>
              
              <h5 ng-show="ask['$с объекта']" class="chip blue-text text-darken-3 fw500 z-depth-1" title="с объекта">
                <svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" class="blue-fill fill-darken-3" style="height: 1.2rem;"><use xlink:href="/fonts/icons.svg#from-location" /></svg>
                <span>{{ ask['$с объекта'].name }}</span>
              </h5>
              
              <!--- перенес к списку ТМЦ h4 ng-show="ask['$на объект']" class="chip blue darken-3 white-text right" title="через базу">
                <svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" class="white-fill" style="height: 2rem;"><use xlink:href="/fonts/icons.svg#tracking" /></svg>
                <span>{{ ask['$на объект'].name }}</span>
              </h4-->
              
            </div>
            
            <!--div ng-if="!$c.param['объект'] || !$c.param['объект'].id || $c.param['объект'].id != (ask['на объект'] && ask['на объект'].id) " ng-init="base = ask['на объект']" ng-show="base.id" class="chip z-depth-1 blue lighten-4" style="width:100%;">
              <h4 class="inline blue-text text-darken-3">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="blue-fill fill-darken-3" style="height: 2rem;"><use xlink:href="/fonts/icons.svg#tracking" /></svg>
                <span>{{ base.name }}</span>
              </h4>
            </div-->
            
            <div ng-hide=" !ask['транспорт'] " class="chip z-depth-1" style="padding:0 0.5rem;">
              <h4>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 10 50 50" class="black-fill fill-darken-3"  style="height: 1.5rem;"><use xlink:href="/fonts/icons.svg#truck" /></svg>
                <span ng-hide="!ask['транспорт1']">{{ ask['транспорт1'] }}</span>
                
                <svg ng-hide="!ask['транспорт1']" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" class=" grey-fill" style="height: 1rem;"><use xlink:href="/fonts/icons.svg#link"></use></svg>
                <span>{{ ask['транспорт'] }}</span>
                <span ng-repeat="cat in ask['категории'].slice(1) track by $index" class="breadcrumb grey-text middle">{{ cat }}</span>
              </h4>
              <div>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" class="black-fill fill-darken-3"  style="height: 1.2rem;"><use xlink:href="/fonts/icons.svg#driver" /></svg>
                <span>{{ ask.driver.title }}</span>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" class=" black-fill" style="height: 1.2rem;"><use xlink:href="/fonts/icons.svg#phone-round"></use></svg>
                <span>{{ ask.driver.phone }}</span>
                
              </div>
              <div ng-hide="!ask.driver.doc">
                <i class="icon-address-card-o black-text" title="паспорт водителя"></i>
                <span class="fs8">{{ ask.driver.doc }}</span>
              </div>
              
            </div>
            
            <h5 class="right chip padd-0-05 shadow-inset-10  fs8 black-text"  title="снабженец">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" class="" style="height: 1rem;"><use xlink:href="/fonts/icons.svg#person"></use></svg>
              {{ ask['$снабженец'].names.join(' ') }}
            
            </h5>
            
            <!--h5 ng-hide=" !ask['без транспорта'] " class="chip z-depth-1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 10 50 50" class="red-fill fill-darken-3"  style="height: 1.5rem;"><use xlink:href="/fonts/icons.svg#truck" /></svg>
              <span>Без транспортного отдела</span>
            </h5-->
            
          </td>
          
          
          <!--span ng-if="$c.param['объект'].id === 0" class="black-text bold chip nowrap" title="сумма">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" class="black-fill" style="height: 1.2rem;"><use xlink:href="/fonts/icons.svg#sigma" /></svg>
            = {{ $c.SumMoney(ID1).toLocaleString('ru-RU') }} руб
          </span-->
          
          
          <td class="" style="width:70%; padding:0.5rem;">
            
            <div ng-show="ask['$на объект'] && ask['$на объект'].id"><!-- нужно перемещение -->
            
              <h6 class="chip transparent navy-text">
                <span> через </span>
                <!--i class="icon icon-left fs14 before-rotate180 ">  </i-->
                
              </h6>
              
              <h5 class="chip navy lighten-4 navy-text fw500 z-depth-2" title="через базу">
                <svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" class="navy-fill" style="height: 2rem;"><use xlink:href="/fonts/icons.svg#tracking" /></svg>
                <span>{{ ask['$на объект'].name }}</span>
              </h5>
              
              <a ng-click="$c.NewMove(ask)" href="javascript:" data-target="modal-move" class="btn red lighten-3 red-text text-darken-3 right">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" style="height: 1.2rem;" class="red-fill fill-darken-3"><use xlink:href="/fonts/icons.svg#from-location"></use></svg>
                <span>Переместить</span>
              </a>
              
            </div>
            
            <!--div ng-if=" ask['переместить'] " style="position:absolute; left:0; z-index:100;"><tmc-baza-form  data-data=" ask['переместить'] " data-param=" moveParam " ></tmc-baza-form><!--- форма перемещения>
            </div-->
            
            <div class="card z-depth-1000 lime lighten-4 relative " style="width:100%; margin:0; padding:0.5rem; max-height: 15rem; overflow-y: auto;">
              <!--div ng-show="ask['@позиции тмц'].length > 1" class="lime darken-4 white-text" style="position: absolute; z-index: 1; right: 0; top: 0; border-radius: 0 0 0 1rem; padding: 0.3rem;">{{ ask['@позиции тмц'].length }} поз.</div-->
              <tmc-snab-table-tmc data-param="$c.param" data-data="ask['@позиции тмц']" data-doc=" ask " class="block"></tmc-snab-table-tmc>
            </div>
            <div class="" style="margin:0.5rem 0; ">
              <!--textarea ng-model="data1['тмц/снаб/коммент']" ng-disabled000="true" class="materialize-textarea" style="font-size:0.8rem; padding:0;"></textarea-->
              <div ng-show=" !!ask['коммент'] " class="chip000 truncate000 fs8 vtop grey-text000" title="примечание">{{ ask['коммент']    }}</div>
            </div>
            
            <div ng-if="ask['статус'] == 'поступило' " >
              <a ng-click="$c.NewMove(ask)" href="javascript:" class="btn red lighten-3 red-text text-darken-3 right">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" style="height: 1.2rem;" class="red-fill fill-darken-3"><use xlink:href="/fonts/icons.svg#from-location"></use></svg>
                <span>В перемещение</span>
              </a>
            </div>
            
            
            
          </td>
        <!--/a-->
        
      <!--/div>
    </div-->
    
  <!--/div-->

</tr>
<!--li class="center">
  <--span>записей: {{ $c.data.length }}</span->
  <a ng-show="$c['заявки снаб'].length >= 100" class="btn-flat" ng-click="$c.LoadData(true)" href="javascript:">
    <svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" class="black-fill" style="height: 1.2rem;" ><use xlink:href="/fonts/icons.svg#download" /></svg>
    Показать еще
  </a>
</li-->
</tbody></table>
</div>

<div ng-show="!$c.ready || $c.cancelerHttp" ng-include=" 'progress/load' "></div>
<div ng-hide="$c.cancelerHttp" class="center">
    <span>записей: {{ $c.dataFiltered.length }}</span>
    <a ng-show-000="$c.dataFiltered.length >= 100" class="btn-flat z-depth-1" ng-click="$c.LoadData({'$Список':{'append': 1}, })" href="javascript:">
      <i class="material-icons">file_download</i>
      Показать еще записи
    </a>
</div>

<!-- Modal Trigger -->
<!--a class="waves-effect waves-light btn" href="javascript:">Modal</a-->
<!-- Modal Structure -->
<!--div id="modal-move" class="modal transparent" data-overlay-in="animated fade-in-05" data-overlay-out="animated  fade-out-05 " data-modal-in="animated fadeIn slow" data-modal-out="animated slideOutUp faster" data-dismissible="false" style="width:97%; max-height: 92%; top: 5%;">
  
  <div ng-if=" moveParam " class="modal-content-000">
    <tmc-baza-form  data-param=" moveParam " data-on-cancel=" $c.CloseModalMove(data) "></tmc-baza-form><!--- форма перемещения>
  </div>
  
</div--->