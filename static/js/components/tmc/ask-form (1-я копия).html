
@@@ tmc/ask/form

<div ng-hide="$ctrl.ready" ng-include=" 'progress/load' "></div>
<div ng-if="$ctrl.ready">
  
  <div ng-if111="$ctrl.param['объект']">
    <div ng-hide="$ctrl.ask" class="right"><a class="btn" ng-click="$ctrl.New()" href="javascript:">
      <i class="material-icons">note_add</i>
      <span>Новая заявка</span>
      
    </a></div>
    
    <!--div>{{ $ctrl.param | json }}</div-->
    
    <div ng-if="$ctrl.ask" class="card teal lighten-5">
      <a ng-click="$ctrl.Cancel()" href="javascript:" class="right btn orange">
        <i class="material-icons">cancel</i>
        <span>Отмена</span>
      </a>
    <div class="card-content">

      <h3 class="orange-text">Новая заявка</h3>
      <!--div>{{ $ctrl.ask | json }}</div-->
      <table class="striped white">
        <thead><tr>
          <th class="center" style="width:1%;">
            <a ng-click="$ctrl.AddRow()" href="javascript:" class="btn-flat" style="white-space:nowrap; padding: 0 0.3rem;" title="добавить строку">
                <i class="material-icons green-text">add</i>
              </a>
          </th>
          <th>Наименование</th>
          <th class="center" style="width:5rem;">Кол-во</th>
          <th class="center" style="width:5rem;">Ед. изм.</th>
        </tr></thead>
        <tbody>
          <tr ng-repeat="row in $ctrl.ask['позиции']">
            <td class="center">
              <a ng-click="$ctrl.DeleteRow($index)" href="javascript:" class="btn-flat" style="white-space:nowrap; padding: 0 0.3rem;" title="удалить строку">
                <i class="material-icons red-text">delete_forever</i>
                <span>{{ $index+1 }}</span>
              </a>
            </td>
            <td>
              <nomen-item data-data="row['номенклатура']" data-on-focus-field="$ctrl.FocusRow(row)"></nomen-item>
            </td>
            <td class="vbottom">
              <div class="input-field">
                <input  type="text" ng-model="row['количество']" ng-change="$ctrl.ChangeKol($last, row)" ng-focus="$ctrl.FocusRow(row)" placeholder="кол-во" class="right-align">
              </div>
            </td>
            
            <td class="vbottom">
              <div class="input-field">
                <input  type="text" ng-model="row['ед. изм.']" ng-focus="$ctrl.FocusRow(row)" placeholder="единицы" class="">
              </div>
            </td>
            
          </tr>
        </tbody>
      
      </table>
      
      <div class="input-field">
        <h5>Примечание</h5>
        <textarea ng-model="$ctrl.ask['коммент']" class="materialize-textarea" style="font-size: 0.8rem;"></textarea>
      </div>
      
      <div ng-show="$ctrl.error" class="red-text">{{ $ctrl.error }}</div>
      <div ng-show="$ctrl.cancelerHttp" ng-include=" 'progress/save' "></div>
    
    </div>
    <div class="card-action center">
      <a class="btn" ng-click="$ctrl.Save($ctrl.ask)" href="javascript:" ng-disabled="!$ctrl.Save()">
        <i class="material-icons">save</i>
        <span>Сохранить</span>
      </a>
      <a ng-if="$ctrl.ask.id" class="btn red" ng-click="$ctrl.Delete($ctrl.ask)" href="javascript:">
        <i class="material-icons">delete_forever</i>
        <span>Удалить</span>
      </a>
    </div>
    </div>
  
  </div>


</div>