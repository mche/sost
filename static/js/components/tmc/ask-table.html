@@@ tmc/ask/table

<div ng-hide="!$ctrl.cancelerHttp" ng-include=" 'progress/load' "></div>

<!--tmc-ask-form ng-if="$ctrl.ready"  data-param="$ctrl.param"></tmc-ask-form-->

<div class="show-on-ready" style="max-height: 50vh;; overflow-y: auto;">

<!--- таблица для необработанных заявок ТМЦ + простые поставки построчно -->
<!--div class="table-scroll-outer"><div class="table-scroll-inner"-->
<table class="top000 striped bordered  z-depth-3" ng-class="{'highlight-maroon-lighten-4': !!$ctrl.param['список простых поставок'], 'highlight-orange-lighten-4': !!$ctrl.param['в поставку']}">
  <thead ng-class=" $ctrl.param.theadClass ">
    <tr><!--th>#</th-->
    <th class="center" style="width:1%;">
      <h4 class="fw500">
        <a href="javascript:" data-target="date-select000">
          <!--i class="material-icons">today</i-->
          <span>На дату</span>
        </a>
      </h4>
      <div ng-if="$ctrl.param.table['дата1'].ready">
       <span ng-repeat="v in $ctrl.param.table['дата1']['формат'] track by $index" class="breadcrumb00 chip green-text">{{v}}</span>
      </div>
    </th>
    
    <th ng-if="$ctrl.param['объект'].id === 0" class="center">
      <h4 class="fw500">На объект</h4>
    
    </th>
    
    <!--th ng-if="$ctrl.param.move.id === 0 || $ctrl.param.move.id == 1" ng-class="{'light-green lighten-4': $ctrl.param.move.id === 0}">
      <h4><a href="javascript:" data-target="contragent-select" class="green-text text-darken-2">
        <i class="material-icons">business</i>
        <span>Контрагент</span>
      </a></h4>
      <div ng-if="$ctrl.param.table['контрагент'].ready && $ctrl.param.table['контрагент'].id">
       <span class="chip green-text">{{$ctrl.param.table['контрагент'].title}}</span>
      </div>
      
    </th-->
    
    <th class="center" style="min-width:40%;">
      <h4 class="fw500"><a href="javascript:" data-target="nomen-select" class000="green-text text-darken-2">
        <!--i class="material-icons">business</i-->
        <span>Наименование</span>
      </a></h4>
      <div ng-if="$ctrl.param.table['номенклатура'].ready && $ctrl.param.table['номенклатура'].id">
       <span class="chip green-text">{{$ctrl.param.table['номенклатура'].title}}</span>
      </div>
      
    </th>
    
    <th class="center" style="width:1%;">
      <h4 class="fw500">
        <!--i class="material-icons">more_horiz</i-->
        <span>Количество</span>
        <span ng-hide=" !$ctrl.param['список простых поставок'] ">&nbsp;заявки</span>
      </h4>
      <div ng-show=" !$ctrl.param['список простых поставок'] "><span class="bold">еще</span> <span class="chip grey-text">всего</span> </div>
      
    </th>
    
    <!--th>
      <h4>
        <span>Ед</span>
      </h4>
    </th-->
    
    <th class="center" style="min-width:10%;">
      <h4 class="fw500">
        <!--i class="material-icons">message</i-->
        <span>Примечание</span>
      </h4>
    </th>
    
    <th ng-if=" !!$ctrl.param['в поставку'] && !$ctrl.param['список простых поставок'] " class="center vbottom" style="width:1%;">
      <h4 class="fw500">В поставку</h4>
    </th>
    
    <th ng-if=" !!$ctrl.param['в поставку'] && !$ctrl.param['список простых поставок'] " class="center vbottom" style="width:1%;" colspan-000="2"><!--- на два столбца -->
      <h4 class="fw500 maroon-text text-darken-3" title="простая поставка">проще</h4>
    </th>
    
    <th ng-if=" !!$ctrl.param['список простых поставок'] " class="center">
      <h4 class="fw500 maroon-text text-darken-3" title="">Простая поставка</h4>
    </th>

    
    </tr>
  </thead>
  
  <tbody ng-class=" $ctrl.param.tbodyClass " class=""><!-- | filter: $ctrl.FilterData-->
    <tr ng-repeat="it in $ctrl.data | filter: $ctrl.FilterData | orderBy: $ctrl.OrderByData : false" ng-init="$ctrl.InitRow(it)"  ng-attr-id="{{it.id}}" ng-click="$ctrl.EditAsk(it)" class="relative000 waves-effect00 waves-teal00" ng-class="{'selected': it['обработка'] || it === $ctrl.param.edit || it._edit}" ng-style="1 ? {'cursor': 'pointer'} : {}" title000="{000{it | json}}">
      <td class="right-align nowrap" title="{{ it['дата1 краткий формат'] || it['дата1'] }}">
        <span class="fs8"><span class=""> {{ it['$дата1']['день нед'] }} </span>    <span class="bold"> {{ it['$дата1']['day'] }} </span>   <span class="fs8"> {{ it['$дата1']['мес'] }} </span> </span>
        <br ng-if="$ctrl.param['объект'].id === 0">
        <span class="fs8 grey-text chip"><span class=""> {{ it['$ts']['день нед'] }} </span>    <span class=""> {{ it['$ts']['day'] }} </span>   <span class=""> {{ it['$ts']['мес'] }} </span></span>
      </td>
      <td ng-if="$ctrl.param['объект'].id === 0">
        <h4>
          <i class="icon icon-star blue-text"></i>
          <span class="blue-text">{{it['объект']}}</span>
        </h4>
        <h5>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" class="black-fill fill-darken-3"  style="height: 1.2rem;"><use xlink:href="/fonts/icons.svg#person" /></svg>
          <span class="black-text fs8">{{ it['$профиль заказчика'].names.join(' ') }}</span>
        </h5>
      </td>
      <td class="right-align">
          <h5><span ng-repeat="n in it['номенклатура'] track by $index" class="breadcrumb teal-text"><span class="chip000 border000">{{n}}</span></span></h5>
          <div ng-class="{'fs8 grey-text': !!it['номенклатура/id'] }">{{ it['наименование'] }}</div><!-- временно вместо позиции номенклатуры -->
      </td>
      <td class="center bold">
        <!--span class="nowrap">{{  parseFloat(Util.numeric(it["количество"])).toLocaleString('ru-RU')  }}</span>
        <span ng-hide="!it['тмц/количество']" class="nowrap">- {{  parseFloat(Util.numeric(it["тмц/количество"])).toLocaleString('ru-RU')  }} = {{  (parseFloat(Util.numeric(it["количество"])) - parseFloat(Util.numeric(it["тмц/количество"]))).toLocaleString('ru-RU')  }}</span-->
        <div ng-if=" !it['@тмц/строки простой поставки'].length ">
          <span ng-hide="!it['заявка/количество/остаток'] || it['заявка/количество/остаток'] == parseFloat(Util.numeric(it['количество']))" class="bold">{{ it['заявка/количество/остаток'].toLocaleString('ru-RU') }}</span>
          <span ng-class="{'grey-text fs8 chip': !!it['заявка/количество/остаток'] && it['заявка/количество/остаток'] != parseFloat(Util.numeric(it['количество'])), 'bold': !it['заявка/количество/остаток'] || it['заявка/количество/остаток'] == parseFloat(Util.numeric(it['количество']))}">{{ parseFloat(Util.numeric(it['количество'])).toLocaleString('ru-RU') }}</span>
        </div>
        
        <div ng-if=" it['@тмц/строки простой поставки'].length ">
          {{ parseFloat(Util.numeric(it['количество'])).toLocaleString('ru-RU') }}
        </div>
        
      </td>
      <!--td>{{it['ед']}}</td-->
      <td>
        <!--textarea ng-hide="!it['коммент']" ng-model="it['коммент']" ng-disabled="true" class="materialize-textarea fs8" style="font-size:0.8rem; padding:0;"></textarea--->
        <div class="fs8 grey-text">{{ it['коммент'] }}</div>
      </td>
      
      <td ng-if="!!$ctrl.param['в поставку'] && !it['@тмц/строки простой поставки'].length ">
        <div class="input-field center" style000="height: 2.1rem; padding: 0.25rem 0rem;">
          <input type="checkbox" ng-attr-id="{{it.id}}" ng-model="it['обработка']"  ng-change="$ctrl.Checked(it)" ng0000-click="$ctrl." ng000-checked="!!row['']" ng000-disabled="!row['']">
          <label for="{{it.id}}" ng-click="  $ctrl.Checked(it, true) " class="chb-yellow-lighten-4 teal-text text-darken-3">&#8203;</label></label><!-- осторожно, тут пробел нулевлой ширины--->
        </div>
      </td>
      
      <td ng-if=" !!$ctrl.param['в поставку'] && !it['@тмц/строки простой поставки'].length " ng-init=" easy = it['$простая обработка заявки'] " ><!-- простая поставка -->
        <div class="input-field center" style000="height: 2.1rem; padding: 0.25rem 0rem;">
          <input type="checkbox" ng-attr-id="chb-easy-{{it.id}}" ng-model="easy._edit"  ng-change-000="$ctrl.CheckedEasy(it)" ng0000-click="$ctrl." ng000-checked="!!row['']" ng000-disabled="!row['']">
          <label for="chb-easy-{{it.id}}" ng-click="  $ctrl.CheckedEasy(it, true) " class="chb-maroon-lighten-5 maroon-text text-darken-3" title="простая поставка без подтвердений">&#8203;</label></label><!-- осторожно, тут пробел нулевлой ширины--->
        </div>
        
        <!-- строка  формы простой обработки -->
        <div ng-if="easy._edit" class="absolute" style="left: 0; /*top: 5rem;*/ z-index: 1; width:100%;">
          <tmc-snab-form-easy data-data=" easy "></tmc-snab-form-easy>
        </div>
        
      </td>
      
      <td ng-if="!!$ctrl.param['список простых поставок'] " ng-init=" easy = it['$простая обработка заявки'] " class="vtop">
        <div ng-show="easy['$строка тмц/поставщик']['количество']">
          <h5 class="right-align maroon-text">
            <span class="chip center bold" style="min-width:3rem;">{{ easy['$строка тмц/поставщик']['количество'] }}</span>
          </h5>
        </div>
        
        <div ng-show="easy['$строка тмц/с базы']['количество']">
          <h5 class="right-align ">
            <span class="blue-text">★ {{ easy['$строка тмц/с базы']['$объект'].name }}</span>
            <i class="material-icons orange-text text-darken-4">remove_circle_outline</i>
            <span class="chip center bold orange-text text-darken-4" style="min-width:3rem;">{{ easy['$строка тмц/с базы']['количество'] }}</span>
          </h5>
        </div>
        
        <div ng-show="easy['$строка тмц/на базу']['количество']">
          <h5 class="right-align ">
            <span class="blue-text">★ {{ easy['$строка тмц/на базу']['$объект'].name }}</span>
            <i class="material-icons green-text text-darken-4">add_circle_outline</i>
            <span class="chip center bold green-text text-darken-4" style="min-width:3rem;">{{ easy['$строка тмц/на базу']['количество'] }}</span>
          </h5>
        </div>
        
        <div ng-if="!!$ctrl.param['в поставку']" class="right-align" ng-style=" easy._edit && {'visibility':'hidden'} ">
          <a class="btn-flat maroon-text" ng-click=" easy._edit = !easy._edit " href="javascript:" title="изменить простую поставку"><i class="icon icon-ok-circle"></i></a>
        </div>
        
        <div ng-if="easy._edit" class="absolute" style="left: 0; /*top: 5rem;*/ z-index: 1; width:100%;">
          <tmc-snab-form-easy data-data="easy"></tmc-snab-form-easy>
        </div>
        
      </td>
    </tr>
    
    <!--tr>
      <td colspan="{{$ctrl.param['объект'].id === 0 ? 7 : 6}}">
        <div class="center">
          <!--span>записей: {{ $ctrl.dat$ctrl.taba['заявки'].length }}</span->
          <a ng-show="$ctrl.data['заявки'].length >= 100" class="btn-flat" ng-click="$ctrl.LoadData(true)" href="javascript:">
            <svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" class="black-fill" style="height: 1.2rem;" ><use xlink:href="/fonts/icons.svg#download" /></svg>
            Показать еще
          </a>
        </div>
        <div ng-show="$ctrl.cancelerHttp" ng-include=" 'progress/load' "></div>
      </td>
    
    </tr-->
  
  </tbody>

</table>

</div>