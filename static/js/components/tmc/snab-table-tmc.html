@@@ tmc/snab/table/tmc

<div ng-if="$ctrl.ready" class="relative">
  <div ng-init="accepted = $ctrl.data.filter($ctrl.FilterDataAccepted).length" class="padd-0-05 red darken-3" style="position:absolute; right:-0.5rem; top:-0.5rem; border-radius: 0 0 0 0.5rem; z-index:1;" title="принято позиций">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" class="white-fill" style="height: 1rem;"><use xlink:href="/fonts/icons.svg#checked1"></use></svg>
    <span class="white-text">{{ accepted }}</span>
  </div>
  
<table class="top bordered">
<tbody>
  <tr ng-repeat="row in $ctrl.data | filter: $ctrl.FilterData | orderBy : 'id' " ng-init="$ctrl.InitRow(row)" title="позиция №{{ $index+1 }}"><!-- -->
    <td style="width: 1%; border-right:1px solid #aaa" class="center "  title000="{000{ row['$дата1'] | json }}">
      {{ $index+1 }}
    </td >
    <td  style="width: 30%;">
      <h4>
        <svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" class="orange-fill fill-darken-3" style="height: 1.2rem;"><use xlink:href="/fonts/icons.svg#to-location" /></svg>
        <span class="orange-text text-darken-3">{{ row["$объект"].name }}</span>
        <!--span class="grey-text">{{ row["$объект"] | json }}</span-->
      </h4>
      <h5 ng-show="row['$профиль заказчика']" class="" >
        <span class="chip shadow-inset-10 orange-text text-darken-3 fs8" title="заявка-заказчик">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" class="black-fill fill-darken-3"  style="height: 1rem;"><use xlink:href="/fonts/icons.svg#person" /></svg>
          <span>{{ row['$профиль заказчика'].names.join(' ') }}</span>
        </span>
        
        <span class="chip" style="padding: 0 0.5rem;" title="заявка на дату">
          <span class="fs8"> {{ (row['$дата1'] && row['$дата1']['день нед']) || (row['$тмц/заявка'] && row['$тмц/заявка']['$дата1'] && row['$тмц/заявка']['$дата1']['день нед']) }} </span><!--- || (row['$ts'] && row['$ts']['день нед']) -->
          <!--br-->
          <span class="bold"> {{ (row['$дата1'] && row['$дата1']['day']) || (row['$тмц/заявка'] && row['$тмц/заявка']['$дата1'] && row['$тмц/заявка']['$дата1']['day'])  }} </span><!---  || (row['$ts'] && row['$ts']['day'])-->
          <!--br-->
          <span class="fs8"> {{ (row['$дата1'] && row['$дата1']['мес']) || (row['$тмц/заявка'] && row['$тмц/заявка']['$дата1'] && row['$тмц/заявка']['$дата1']['мес'])   }} </span><!--- || (row['$ts'] && row['$ts']['мес']) -->
        </span>
      </h5>
    </td>
    <td class="right-align" style="width: 40%;">
      <span ng-repeat="n in row['номенклатура'] track by $index" class="breadcrumb teal-text"><span class="chip000 border000">{{n}}</span></span>
    </td>
    <td class="right-align" style="width: 1%;" >
      <div class="chip shadow-inset-10 nowrap fs14 bold text-darken-3" title="количество" ng-class-000="{'green-text': !!row['количество/принято'] && !row['на объект/id'], 'blue-text': !!row['количество/принято'] && !!row['на объект/id'] }" style="padding-right: 0.77rem; line-height: 1.7rem;">{{ parseFloat(Util.numeric(row["количество"])).toLocaleString('ru-RU') }}</div>
      <div ng-hide="!row['цена']" class="nowrap grey-text" title="цена"><span class="left">ц. </span> {{ parseFloat(Util.numeric(row["цена"])).toLocaleString('ru-RU') }} <span class="grey-text fs8">₽</span></div>
      <div ng-hide="!row['цена']" class="nowrap grey-text tborder" title="сумма">
        <span class="left">Σ </span>   <span class="bold">{{ (parseFloat(Util.numeric(row["количество"])) * parseFloat(Util.numeric(row["цена"]))).toLocaleString('ru-RU') }}</span> <span class="grey-text fs8">₽</span>
      </div> 
    </td>
    <!--td style="width: 1%;">
      <div class="fs12"><!--ед >&nbsp;</div>
      <div class="grey-text">₽</div>
      <div class="grey-text">₽</div>
    </td-->
    <td  class="relative" style="width: 15%;">
      <div ng-if="row.hasOwnProperty('крыжик количества') || row['количество/принято']" class="input-field000 chip shadow-inset-10" style="" title="позиция принята получателем"><!--- принятая позиция --->
        <input ng-if="row.hasOwnProperty('крыжик количества') && (!row['дата/принято/часов'] || row['дата/принято/часов'] < 24)" type="checkbox" ng-model="row['крыжик количества']" ng-attr-id="{{ 'tmcOK'+row.id }}" ng-change="$ctrl.OnAccept(row)"  class="hide" >
        <!--span class=""--><label  for="tmcOK{{row.id}}" class="nowrap text-darken-3 " ng-class="{'before-white': !row['крыжик количества'], 'green-text': !row['на объект/id'], 'blue-text': !!row['на объект/id'] }" style="" title="{{ row['крыжик количества'] ? 'отменить прием' : 'принять' }} ТМЦ">
          <svg ng-show=" (!row.hasOwnProperty('крыжик количества') || (!row['дата/принято/часов'] || row['дата/принято/часов'] >= 24)) && !!row['количество/принято']" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" class="red-fill fill-darken-3" ng-class-000="{'green-fill': !row['на объект/id'], 'blue-fill': !!row['на объект/id'] }" style="height: 1.5rem;"><use xlink:href="/fonts/icons.svg#checked1"></use></svg>
          <span ng-show="!row['количество/принято'] && row.hasOwnProperty('крыжик количества')">Принять ТМЦ</span>
          <span ng-hide="!row['количество/принято']" class="center chip vtop white red-text text-darken-3 z-depth-1 fs10" ng-class-000="{'green-text': !row['на объект/id'], 'blue-text': !!row['на объект/id'] }" style="padding:0 0.3rem;" title="дата приема ТМЦ">
            <span class="fs8 ">{{ row['$дата/принято']['день нед'] }}</span>   <span class="bold">{{ row['$дата/принято']['day'] }}</span>  <span class="fs8">{{ row['$дата/принято']['мес'] }}</span>
            
          </span>
        </label>
        <h5 ng-show="row['количество/принято']" class="chip transparent nowrap" style="padding: 0 0.5rem;" title="кто принял">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" class="red-fill fill-darken-3" ng-class-000="{'green-fill': !row['на объект/id'], 'blue-fill': !!row['на объект/id'] }" style="height: 1rem;"><use xlink:href="/fonts/icons.svg#person" /></svg>
            <span class="fs8 red-text text-darken-4" ng-class-000="{'green-text': !row['на объект/id'], 'blue-text': !!row['на объект/id'] }">{{ row['$принял'].names.join(' ') }}</span>
          </h5>
      </div>
      
      <!--textarea ng-model="row['коммент']" ng-disabled="true" class="materialize-textarea" style="font-size:0.8rem; padding:0;"></textarea-->
      <div class="fs8 truncate grey-text" title="примечание">{{ row['коммент'] }}</div>
      
      <!--div class="pre">{{ row | json }}</div-->
      <div class="fs7 grey-text" style="position: absolute; bottom:0; right:0;" title="{{ row | json }}">#{{ (row['$тмц/заявка'] && row['$тмц/заявка'].id) || row.id }}</div>
    </td>
  </tr>
</tbody></table>
</div>