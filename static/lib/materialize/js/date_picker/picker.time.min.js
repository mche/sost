/*!
 * Time picker for pickadate.js v3.5.6
 * http://amsul.github.io/pickadate.js/time.htm
 */(function(a){"function"==typeof define&&define.amd?define(["./picker","jquery"],a):"object"==typeof exports?module.exports=a(require("./picker.js"),require("jquery")):a(Picker,jQuery)})(function(a,b){function c(a,b){var c=this,d=a.$node[0].value,e=a.$node.data("value"),f=e||d,g=e?b.formatSubmit:b.format;c.settings=b,c.$node=a.$node,c.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},c.item={},c.item.clear=null,c.item.interval=b.interval||30,c.item.disable=(b.disable||[]).slice(0),c.item.enable=-function(a){return!0===a[0]?a.shift():-1}(c.item.disable),c.set("min",b.min).set("max",b.max).set("now"),f?c.set("select",f,{format:g}):c.set("select",null).set("highlight",c.item.now),c.key={40:1,38:-1,39:1,37:-1,go:function(a){c.set("highlight",c.item.highlight.pick+a*c.item.interval,{interval:a*c.item.interval}),this.render()}},a.on("render",function(){var c=a.$root.children(),d=c.find("."+b.klass.viewset),e=function(a){return["webkit","moz","ms","o",""].map(function(b){return(b?"-"+b+"-":"")+a})},f=function(a,b){e("transform").map(function(c){a.css(c,b)}),e("transition").map(function(c){a.css(c,b)})};d.length&&(f(c,"none"),c[0].scrollTop=~~d.position().top-2*d[0].clientHeight,f(c,""))},1).on("open",function(){a.$root.find("button").attr("disabled",!1)},1).on("close",function(){a.$root.find("button").attr("disabled",!0)},1)}if(!b().pickatime){var d=a._;c.prototype.set=function(a,b,c){var d=this,e=d.item;return null===b?("clear"==a&&(a="select"),e[a]=b,d):(e["enable"==a?"disable":"flip"==a?"enable":a]=d.queue[a].split(" ").map(function(e){return b=d[e](a,b,c),b}).pop(),"select"==a?d.set("highlight",e.select,c):"highlight"==a?d.set("view",e.highlight,c):"interval"==a?d.set("min",e.min,c).set("max",e.max,c):a.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&d.disabled(e.select)&&d.set("select",b,c),e.highlight&&d.disabled(e.highlight)&&d.set("highlight",b,c),"min"==a&&d.set("max",e.max,c)),d)},c.prototype.get=function(a){return this.item[a]},c.prototype.create=function(a,c,e){var f=this;return c=void 0===c?a:c,d.isDate(c)&&(c=[c.getHours(),c.getMinutes()]),b.isPlainObject(c)&&d.isInteger(c.pick)?c=c.pick:b.isArray(c)?c=60*+c[0]+ +c[1]:!d.isInteger(c)&&(c=f.now(a,c,e)),"max"==a&&c<f.item.min.pick&&(c+=1440),"min"!=a&&"max"!=a&&0!=(c-f.item.min.pick)%f.item.interval&&(c+=f.item.interval),c=f.normalize(a,c,e),{hour:~~(24+c/60)%24,mins:(60+c%60)%60,time:(1440+c)%1440,pick:c%1440}},c.prototype.createRange=function(a,c){var e=this,f=function(a){return!0===a||b.isArray(a)||d.isDate(a)?e.create(a):a};return d.isInteger(a)||(a=f(a)),d.isInteger(c)||(c=f(c)),d.isInteger(a)&&b.isPlainObject(c)?a=[c.hour,c.mins+a*e.settings.interval]:d.isInteger(c)&&b.isPlainObject(a)&&(c=[a.hour,a.mins+c*e.settings.interval]),{from:f(a),to:f(c)}},c.prototype.withinRange=function(a,b){return a=this.createRange(a.from,a.to),b.pick>=a.from.pick&&b.pick<=a.to.pick},c.prototype.overlapRanges=function(a,b){var c=this;return a=c.createRange(a.from,a.to),b=c.createRange(b.from,b.to),c.withinRange(a,b.from)||c.withinRange(a,b.to)||c.withinRange(b,a.from)||c.withinRange(b,a.to)},c.prototype.now=function(a,b){var c,e=this.item.interval,f=new Date,g=60*f.getHours()+f.getMinutes(),h=d.isInteger(b);return g-=g%e,c=0>b&&e*b+g<=-e,g+="min"==a&&c?0:e,h&&(g+=e*(c&&"max"!=a?b+1:b)),g},c.prototype.normalize=function(a,b){var c=this.item.interval,d=this.item.min&&this.item.min.pick||0;return b-="min"==a?0:(b-d)%c,b},c.prototype.measure=function(a,c,e){var f=this;return c||(c="min"==a?[0,0]:[23,59]),"string"==typeof c?c=f.parse(a,c):!0===c||d.isInteger(c)?c=f.now(a,c,e):b.isPlainObject(c)&&d.isInteger(c.pick)&&(c=f.normalize(a,c.pick,e)),c},c.prototype.validate=function(a,b,c){var d=this,e=c&&c.interval?c.interval:d.item.interval;return d.disabled(b)&&(b=d.shift(b,e)),b=d.scope(b),d.disabled(b)&&(b=d.shift(b,-1*e)),b},c.prototype.disabled=function(a){var c=this,e=c.item.disable.filter(function(e){return d.isInteger(e)?a.hour==e:b.isArray(e)||d.isDate(e)?a.pick==c.create(e).pick:b.isPlainObject(e)?c.withinRange(e,a):void 0});return e=e.length&&!e.filter(function(a){return b.isArray(a)&&"inverted"==a[2]||b.isPlainObject(a)&&a.inverted}).length,-1===c.item.enable?!e:e||a.pick<c.item.min.pick||a.pick>c.item.max.pick},c.prototype.shift=function(a,b){var c=this,d=c.item.min.pick,e=c.item.max.pick;for(b=b||c.item.interval;c.disabled(a)&&(a=c.create(a.pick+=b),!(a.pick<=d||a.pick>=e)););return a},c.prototype.scope=function(a){var b=this.item.min.pick,c=this.item.max.pick;return this.create(a.pick>c?c:a.pick<b?b:a)},c.prototype.parse=function(a,b,c){var e,f,g,h,i,j=this,k={};if(!b||"string"!=typeof b)return b;for(h in c&&c.format||(c=c||{},c.format=j.settings.format),j.formats.toArray(c.format).map(function(a){var c,e=j.formats[a],f=e?d.trigger(e,j,[b,k]):a.replace(/^!/,"").length;e&&(c=b.substr(0,f),k[a]=c.match(/^\d+$/)?+c:c),b=b.substr(f)}),k)i=k[h],d.isInteger(i)?h.match(/^(h|hh)$/i)?(e=i,("h"==h||"hh"==h)&&(e%=12)):"i"==h&&(f=i):h.match(/^a$/i)&&i.match(/^p/i)&&("h"in k||"hh"in k)&&(g=!0);return 60*(g?e+12:e)+f},c.prototype.formats={h:function(a,b){return a?d.digits(a):b.hour%12||12},hh:function(a,b){return a?2:d.lead(b.hour%12||12)},H:function(a,b){return a?d.digits(a):""+b.hour%24},HH:function(a,b){return a?d.digits(a):d.lead(b.hour%24)},i:function(a,b){return a?2:d.lead(b.mins)},a:function(a,b){return a?4:720>b.time%1440?"a.m.":"p.m."},A:function(a,b){return a?2:720>b.time%1440?"AM":"PM"},toArray:function(a){return a.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(a,b){var c=this;return c.formats.toArray(a).map(function(a){return d.trigger(c.formats[a],c,[0,b])||a.replace(/^!/,"")}).join("")}},c.prototype.isTimeExact=function(a,c){var e=this;return d.isInteger(a)&&d.isInteger(c)||"boolean"==typeof a&&"boolean"==typeof c?a===c:(d.isDate(a)||b.isArray(a))&&(d.isDate(c)||b.isArray(c))?e.create(a).pick===e.create(c).pick:!!(b.isPlainObject(a)&&b.isPlainObject(c))&&e.isTimeExact(a.from,c.from)&&e.isTimeExact(a.to,c.to)},c.prototype.isTimeOverlap=function(a,c){var e=this;return d.isInteger(a)&&(d.isDate(c)||b.isArray(c))?a===e.create(c).hour:d.isInteger(c)&&(d.isDate(a)||b.isArray(a))?c===e.create(a).hour:!!(b.isPlainObject(a)&&b.isPlainObject(c))&&e.overlapRanges(a,c)},c.prototype.flipEnable=function(a){var b=this.item;b.enable=a||(-1==b.enable?1:-1)},c.prototype.deactivate=function(a,c){var e=this,f=e.item.disable.slice(0);return"flip"==c?e.flipEnable():!1===c?(e.flipEnable(1),f=[]):!0===c?(e.flipEnable(-1),f=[]):c.map(function(a){for(var c,g=0;g<f.length;g+=1)if(e.isTimeExact(a,f[g])){c=!0;break}!c&&(d.isInteger(a)||d.isDate(a)||b.isArray(a)||b.isPlainObject(a)&&a.from&&a.to)&&f.push(a)}),f},c.prototype.activate=function(a,c){var e=this,f=e.item.disable,g=f.length;return"flip"==c?e.flipEnable():!0===c?(e.flipEnable(1),f=[]):!1===c?(e.flipEnable(-1),f=[]):c.map(function(a){var c,h,i,j;for(i=0;i<g;i+=1)if(h=f[i],e.isTimeExact(h,a)){c=f[i]=null,j=!0;break}else if(e.isTimeOverlap(h,a)){b.isPlainObject(a)?(a.inverted=!0,c=a):b.isArray(a)?(c=a,!c[2]&&c.push("inverted")):d.isDate(a)&&(c=[a.getFullYear(),a.getMonth(),a.getDate(),"inverted"]);break}if(c)for(i=0;i<g;i+=1)if(e.isTimeExact(f[i],a)){f[i]=null;break}if(j)for(i=0;i<g;i+=1)if(e.isTimeOverlap(f[i],a)){f[i]=null;break}c&&f.push(c)}),f.filter(function(a){return null!=a})},c.prototype.i=function(a,b){return d.isInteger(b)&&0<b?b:this.item.interval},c.prototype.nodes=function(a){var b=Math.floor,c=this,e=c.settings,f=c.item.select,g=c.item.highlight,h=c.item.view,i=c.item.disable,j=!e.table||60<c.item.interval?c.item.interval:60,k=60<c.item.interval?1:b(60/c.item.interval);return d.node("table",d.group({min:c.item.min.pick,max:c.item.max.pick,i:j,node:"tr",item:function(a){var b=c.create(a).hour,l=0;return[d.group({min:a,max:a+j-1,i:c.item.interval,node:"td",item:function(a){a=c.create(a);var j=a.pick,m=a.hour,n=a.mins,o=c.item.now.pick==j,p=f&&f.pick==j,q=g&&g.pick==j,r=i&&c.disabled(a),s=d.trigger(c.formats.toString,c,[e.format,a]);return m==b?(l+=1,[d.node("div",d.trigger(c.formats.toString,c,[d.trigger(e.formatLabel,c,[a])||e.format,a]),function(a){return o&&a.push(e.klass.now),p&&a.push(e.klass.selected),q&&a.push(e.klass.highlighted),h&&h.pick==j&&a.push(e.klass.viewset),r&&a.push(e.klass.disabled),a.join(" ")}([e.klass.listItem,e.klass.tableItem]),"data-pick="+a.pick+" "+d.ariaAttr({role:"gridcell",label:s,selected:!!(p&&c.$node.val()===s)||null,activedescendant:!!q||null,disabled:!!r||null})),"",("colspan"==e.table&&59<n+c.item.interval&&l==k?"colspan=2":"")+d.ariaAttr({role:"presentation"})]):["colspan"==e.table?null:" "]}})]}}),e.klass.list+" "+e.klass.table,d.ariaAttr({role:"grid",controls:c.$node[0].id}))+d.node("div",d.node("button",e.clear,e.klass.buttonClear,"type=button data-clear=1"+(a?"":" disabled")+" "+d.ariaAttr({controls:c.$node[0].id})),"",d.ariaAttr({role:"presentation"}))},c.defaults=function(a){return{clear:"Clear",format:"h:i A",interval:30,closeOnSelect:!0,closeOnClear:!0,klass:{picker:a+" "+a+"--time",holder:a+"__holder",list:a+"__list",table:a+"__table",listItem:a+"__list-item",tableItem:a+"__table-item",disabled:a+"__list-item--disabled",selected:a+"__list-item--selected",highlighted:a+"__list-item--highlighted",viewset:a+"__list-item--viewset",now:a+"__list-item--now",buttonClear:a+"__button--clear"}}}(a.klasses().picker),a.extend("pickatime",c)}});